{% extends "layout.html" %}

{% block title %}{{ politician.name }} - Promise Tracker{% endblock %}

{% block content %}
<div class="header-section">
    <div class="politician-profile">
        <div class="avatar-placeholder-large">
            {{ politician.name[0] }}
        </div>
        <h1>{{ politician.name }}</h1>
        <p class="party-large">üéóÔ∏è {{ politician.party }}</p>
        <p style="margin-top: 1rem; color: var(--neutral-500); font-weight: 600; position: relative; z-index: 1;">
            üìã ‡∏Ñ‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: {{ promises|length }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        </p>
    </div>
</div>

{% if promises %}
<div style="text-align: center; margin-bottom: 2rem;">
    <h2 style="font-family: var(--font-display); font-size: 2rem; font-weight: 800; color: var(--neutral-900);">
        ‡∏Ñ‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Ç‡∏≠‡∏á {{ politician.name }}
    </h2>
    <p style="color: var(--neutral-500); margin-top: 0.5rem; font-size: 1.1rem;">
        ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö
    </p>
</div>

<div class="promises-grid">
    {% for promise in promises %}
    <div class="promise-card status-{{ promise.status.name.lower() }}" style="animation-delay: {{ loop.index0 * 0.05 }}s;">
        <div class="promise-header">
            <span class="status-badge status-{{ promise.status.name.lower() }}">
                {{ promise.status.value }}
            </span>
            <span class="date">üìÖ {{ promise.announced_date.strftime('%d/%m/%Y') }}</span>
        </div>

        <h3>
            <a href="/promises/{{ promise.id }}">{{ promise.description }}</a>
        </h3>

        <div class="campaign-info">
            <small>üó≥Ô∏è ‡∏´‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏µ {{ promise.campaign.year }} ({{ promise.campaign.district }})</small>
        </div>

        {% if promise.updates %}
        <div style="margin-top: 1rem; padding: 0.75rem; background: var(--neutral-100); border-radius: 8px; font-size: 0.9rem;">
            <strong style="color: var(--primary);">üìä ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï:</strong> 
            <span style="color: var(--neutral-700);">{{ promise.updates|length }} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
            <br>
            <small style="color: var(--neutral-500);">‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: {{ promise.updates|sort(attribute='update_date', reverse=True)|first|attr('update_date')|strftime('%d/%m/%Y') }}</small>
        </div>
        {% else %}
        <div style="margin-top: 1rem; padding: 0.75rem; background: var(--neutral-100); border-radius: 8px; font-size: 0.9rem; color: var(--neutral-500);">
            <em>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</em>
        </div>
        {% endif %}

        <div class="card-footer">
            <a href="/promises/{{ promise.id }}" class="btn-detail">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state" style="padding: 4rem; text-align: center; background: white; border-radius: 16px; box-shadow: var(--shadow-md);">
    <p style="font-size: 1.3rem; color: var(--neutral-400);">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ</p>
</div>
{% endif %}

<style>
    .promises-grid > * {
        animation: fadeInUp 0.6s ease-out both;
    }
</style>
{% endblock %}